{% extends 'base.html' %}
{% load i18n %}
{% load url %}
{% load staticfiles %}

{% block layout %}
    <div class="row">
        <div class="column">
            <div class="ui stackable top attached mini tabular menu">
                <div class="{% active request 'core:client' client.id %} item"><a href="{% url 'core:client' client.id %}"><i class="fa fa-info" aria-hidden="true"></i> {% trans 'Base' %}</a></div>
                <div class="{% active request 'core:client_payments' client.id %} item"><a href="{% url 'core:client_payments' client.id %}">{% trans 'Payments' %}</a></div>
                <div class="{% active request 'core:client_fees' client.id %} item"><a href="{% url 'core:client_fees' client.id %}">{% trans 'Fees' %}</a></div>
                {% check_module 'olltv' as check_module_olltv %}
                {% if check_module_olltv %}
                        <div class="{% active request 'core:user_olltv' client.id %} item"><a href="{% url 'core:user_olltv' client.id %}"><i class="fa fa-television" aria-hidden="true"></i> {% trans 'OLLTV' %}</a></div>
                {% endif %}
                {% check_module 'ipdhcp' as check_module_dhcp %}
                {% if check_module_dhcp %}
                        <div class="{% active request 'core:user_dhcp' client.id %} item"><a href="{% url 'core:user_dhcp' client.id %}"><i class="fa fa-television" aria-hidden="true"></i> {% trans 'Dhcp' %}</a></div>
                {% endif %}
                {% check_module 'claims' as check_module_claims %}
                {% if check_module_claims %}
                        <div class="{% active request 'core:user_claims' client.id %} item"><a href="{% url 'core:user_claims' client.id %}"><i class="fa fa-wpforms fa-fw" aria-hidden="true"></i>{% trans 'Claims' %}</a></div>
                {% endif %}
            </div>
            <div class="ui bottom attached active tab segment">
                <div class="ui stackable mini menu">
                    <div class="item">
                        {% if dv_session %}
                            <div class="floating ui mini green label">
                                {{ dv_session.count }}
                            </div>
                        {% endif %}
                        <button id="session" class="ui green button">
                            {% trans 'Sessions' %}
                        </button>
                    </div>
                    <div id="browse" class="ui very wide popup bottom left transition hidden">
                        <div class="ui column stacked grid">
                            <div class="ui raised segment">
                                {% if dv_session %}
                                    <table class="ui blue small selectable striped table">
                                        <thead class="">
                                            <tr>
                                                <th>IP</th>
                                                <th>Session time</th>
                                                <th>Trafic in</th>
                                                <th>Trafic out</th>
                                                <th>Server</th>
                                                <th>Zap</th>
                                                <th>Hangup</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {% for s in dv_session %}
                                                <tr>
                                                    <td>
                                                        {% ip_convert s.framed_ip_address %}
                                                    </td>
                                                    <td>
                                                        {% convert_timestamp_to_time s.started %}
                                                    </td>
                                                    <td>
                                                        {% convert_bytes s.acct_input_octets s.acct_input_gigawords%}
                                                    </td>
                                                    <td>
                                                        {% convert_bytes s.acct_output_octets s.acct_output_gigawords%}
                                                    </td>
                                                    <td>
                                                        {{ s.nas.name }}
                                                    </td>
                                                    <td>
                                                        <a class="btn btn-xs btn-link" href="#">
                                                            <span class="fa fa-times fa-fw"></span>
                                                        </a>
                                                    </td>
                                                    <td>
                                                        <a class="btn btn-xs btn-link" href="?hangup&acct_session_id={{ s.acct_session_id }}&nas_id={{ s.nas_id }}&port_id={{ s.nas_port_id }}&user_name={{ s.user_name }}"><span class="fa fa-power-off fa-fw"></span></a>
                                                    </td>
                                                </tr>
                                            {% endfor %}
                                        </tbody>
                                    </table>
                                {% else %}
                                    {% trans 'No Sessions' %}
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
                {% block content %}

                {% endblock %}
            </div>
        </div>
    </div>
    <div class="ui stackable grid">
        {% block extra_content %}
        {% endblock %}
    </div>
{% endblock %}
