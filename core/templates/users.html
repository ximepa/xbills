{% extends 'layout.html' %}
{% load i18n %}
{% load url %}
{% load staticfiles %}
{% block extra_css %}
    <link href="{% static 'css/bootstrap-datetimepicker.min.css' %}" rel="stylesheet">
{% endblock %}
{% block extra_scripts %}
    <script type="application/javascript">
        $( document ).ready(function() {
            $('#right_nav').affix({
                offset: {
                    top: 100,
                    bottom: function () {
                        return (this.bottom = $('.footer').outerHeight(true))
                    }
                }
            });
        });
    </script>
{% endblock %}
{% block content %}
    <div class="row">
        <div class="col-xs-12 col-sm-12 col-md-12">
            <div class="well well-sm">
                <ul class="list-group" data-spy="affix" data-offset-top="200" data-offset-bottom="200">
                    <li class="list-group-item">
                        <ul class="pagination pagination-sm">
                            {% if users.has_previous %}
                                <li>
                                    <a href="?{% url_replace_page request 'page' '1' %}" aria-label="Previous">
                                        <span aria-hidden="true">1</span>
                                    </a>
                                </li>
                                {% if users.number > 2 %}
                                    <li class="disabled">
                                        <a href="#" aria-label="Previous">
                                            <span aria-hidden="true">...</span>
                                        </a>
                                    </li>
                                {% endif %}
                            {% endif %}
                            {% for p in page_list %}
                                {% if users.number == p %}
                                    <li class="active">
                                        <a href="?{% url_replace_page request 'page' p %}">{{ p }}</a>
                                    </li>
                                {% else %}
                                    <li class="">
                                        <a href="?{% url_replace_page request 'page' p %}">{{ p }}</a>
                                    </li>
                                {% endif %}
                            {% endfor %}
                            {% if users.has_next %}
                                <li class="disabled">
                                    <a href="#" aria-label="Previous">
                                        <span aria-hidden="true">...</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="?{% url_replace_page request 'page' users.paginator.num_pages %}" aria-label="Next">
                                        <span aria-hidden="true">{{ users.paginator.num_pages }}</span>
                                    </a>
                                </li>
                            {% else %}
                                <li class="disabled">
                                    <a href="#" aria-label="Next">
                                        <span aria-hidden="true">&raquo;</span>
                                    </a>
                                </li>
                            {% endif %}
                        </ul>
                    </li>
                </ul>
                <table class="ui black table table-striped table-hover table-condensed">
                    <thead>
                        <tr class="">
                            <th>{% trans 'Login' %}</th>
                            <th>{% trans 'FIO' %}</th>
                            <th>{% trans 'Deposit' %}</th>
                            <th>{% trans 'Credit' %}</th>
                            <th>{% trans 'Login status' %}</th>
                            <th>{% trans 'Deleted' %}</th>
                            <th>{% trans '-' %}</th>
                            <th>{% trans '-' %}</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for user in users %}
                        <tr>
                            <td><a href="{% url 'core:client' user.id %}">{{ user.login }}</a></td>
                            <td>{{ user.user_pi.fio }}</td>
                            {% if user.bill.deposit < 0 %}
                                <td><span style="color: red">{{ user.bill.deposit }}</span></td>
                            {% else %}
                                <td>{{ user.bill.deposit }}</td>
                            {% endif %}
                            {% if user.credit > 0 %}
                                <td><span style="color: green">{{ user.credit }}</span></td>
                            {% else %}
                                <td>{{ user.credit }}</td>
                            {% endif %}
                            {% if user.disabled %}
                                <td><span style="color: red">{% trans 'Disabled' %}</span></td>
                            {% else %}
                                <td><span style="color: green">{% trans 'Active' %}</span></td>
                            {% endif %}
                            {% if user.deleted %}
                                <td><span style="color: red">{% trans 'Yes' %}</span></td>
                            {% else %}
                                <td>{% trans 'No' %}</td>
                            {% endif %}
                            <td><a href="{% url 'core:client_payments' user.id %}"><img src="{% static 'custom/images/button_payments.png' %}" /></a></td>
                            <td><a href="{% url 'core:client_fees' user.id %}"><img src="{% static 'custom/images/button_fees.png' %}" /></a></td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
                <ul class="list-group">
                    <li class="list-group-item list-group-item-botton">
                        <span class="badge">{{ all }}</span>
                        {% trans 'All' %}
                    </li>
                    <li class="list-group-item list-group-item-botton">
                        <span class="badge">{{ end }}</span>
                        {% trans 'End' %}
                    </li>
                    <li class="list-group-item list-group-item-botton">
                        <span class="badge">{{ disabled }}</span>
                        {% trans 'Disabled' %}
                    </li>
                    <li class="list-group-item list-group-item-botton">
                        <span class="badge">{{ deleted }}</span>
                        {% trans 'Deleted' %}
                    </li>
                </ul>
            </div>
        </div>
    </div>
{% endblock %}