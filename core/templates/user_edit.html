{% extends 'base.html' %}
{% load i18n %}
{% load staticfiles %}
{% block extra_css %}
    <link href="{% static 'css/bootstrap-datetimepicker.min.css' %}" rel="stylesheet">
{% endblock %}
{% block extra_js %}
    <script src="{% static 'js/bootstrap-datetimepicker.min.js' %}"></script>
{% endblock %}
{% block extra_scripts %}

{% endblock %}
{% block content %}
    <ol class="breadcrumb" id="user_info" style="z-index: 2000">
        <li class="active"><i class="fa fa-user fa-2x"></i> <a href="{% url 'core:client' uid %}">{{ user.login }}</a> (UID: {{ user.id }})</li>
    </ol>
    <div class="row">
        <div class="col-xs-12 col-sm-12 col-md-10">
            <div class="panel panel-primary">
                <div class="panel-heading text-center">
                    <a data-toggle="collapse" href="#bill-panel" style="color: white">
                        <i class="fa fa-cog"></i> {% trans 'Bills' %}
                    </a>
                    <div class="pull-right">
                        {% if user_password %}
                            {{ user_password }}
                        {% else %}
                            <div class="btn-group">
                                <button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown">
                                    {% trans 'Actions' %}
                                    <span class="caret"></span>
                                </button>
                                <ul class="dropdown-menu pull-right" role="menu">
                                    <li><a href="{% url 'core:client' uid %}?show_password=1">{% trans 'Show password' %}</a>
                                    </li>
                                    <li><a href="#">{% trans 'Change password' %}</a>
                                    </li>
                                </ul>
                            </div>
                        {% endif %}
                    </div>
                </div>
                <div id="bill-panel" class="panel-collapse collapse in">
                    <form class="form-horizontal" method="post" name="bills_form">{% csrf_token %}
                        <div class="panel-body">
                            <div class="col-md-4">
                                <div class="form-group form-group-sm">
                                    <label for="inputEmail3" class="col-sm-4 control-label">{% trans 'Deposit' %}</label>
                                    <div class="col-sm-8">
                                        <span class="badge form-control-static" >{{ user.bill.deposit|floatformat:4 }}</span>
                                        <div class="pull-right">
                                            <a href="{% url 'core:client_payments' uid %}" class="btn btn-default btn-xs"><i class="fa fa-plus-circle"></i></a>
                                            <a href="{% url 'core:client_fees' uid %}" class="btn btn-default btn-xs"><i class="fa fa-minus-circle"></i></a>
                                            <a class="btn btn-default btn-xs"><i class="fa fa-print"></i></a>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group form-group-sm">
                                    <label for="inputPassword3" class="col-sm-4 control-label">{% trans 'Company' %}</label>
                                    <div class="col-sm-8">
                                        <div class="input-group">
                                            <input type="text" class="form-control" placeholder="{% trans 'Company' %}" aria-describedby="group" disabled value="{{ user.company }}">
                                            <span class="input-group-addon" id="group">
                                                <a href="{% url 'core:user_company' uid %}">
                                                    {% if user.company == 0 %}
                                                        <i class="fa fa-edit fa-fw"></i>
                                                    {% else %}
                                                        <i class="fa fa-plus fa-fw"></i>
                                                    {% endif %}
                                                </a>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group form-group-sm">
                                    <label for="inputPassword3" class="col-sm-4 control-label">{% trans 'Reduction' %}</label>
                                    <div class="col-sm-8">
                                        <div class="input-group">
                                            <input type="text" class="form-control" placeholder="{% trans 'Reduction' %}" aria-describedby="group" value="{{ user.reduction }}">
                                            <span class="input-group-addon" id="reduction"><i class="fa fa-percent fa-fw"></i></span>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group form-group-sm">
                                    <label for="" class="col-sm-4 control-label">{% trans 'Activation' %}</label>
                                    <div class="col-sm-8">
                                        <div id="activation-datepicker" class="">
                                            <div class="input-group">
                                                <input data-format="yyyy-MM-dd" type="date" class="form-control" id="activation" aria-describedby="activation-date" name="activation" placeholder="{% trans 'Activation' %}" value="{{ user.activate|default:"0000-00-00" }}">
                                                <span class="input-group-addon add-on" id="activation-date">
                                                    <i class="fa fa-calendar" data-time-icon="icon-time" data-date-icon="fa-calendar"></i>
                                                </span>
                                            </div>
                                        </div>
                                        <script type="text/javascript">
                                            $(function() {
                                                $('#activation-datepicker').datetimepicker({
                                                    pickTime: false
                                                });
                                            });
                                        </script>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group form-group-sm">
                                    <label for="inputEmail3" class="col-sm-4 control-label">{% trans 'Cash account' %}</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" id="" placeholder="{% trans 'Cash account' %}" disabled value="{{ bill.id }}">
                                    </div>
                                </div>
                                <div class="form-group form-group-sm">
                                    <label for="inputPassword3" class="col-sm-4 control-label">{% trans 'Credit' %}</label>
                                    <div class="col-sm-8">
                                        <input type="number" class="form-control" id="credit" name="credit" placeholder="{% trans 'Credit' %}" value="{{ user.credit }}">
                                    </div>
                                </div>
                                <div class="form-group form-group-sm">
                                    <label for="" class="col-sm-4 control-label">{% trans 'Reduction date' %}</label>
                                    <div class="col-sm-8">
                                        <div id="reduction_date-datepicker" class="">
                                            <div class="input-group">
                                                <input data-format="yyyy-MM-dd" type="date" class="form-control" id="reduction_date" aria-describedby="reduction-date" name="reduction_date" placeholder="{% trans 'Reduction date' %}" value="{{ user.reduction_date|default:"0000-00-00" }}">
                                                <span class="input-group-addon add-on" id="reduction-date">
                                                    <i class="fa fa-calendar" data-time-icon="icon-time" data-date-icon="fa-calendar"></i>
                                                </span>
                                            </div>
                                        </div>
                                        <script type="text/javascript">
                                            $(function() {
                                                $('#reduction_date-datepicker').datetimepicker({
                                                    pickTime: false
                                                });
                                            });
                                        </script>
                                    </div>
                                </div>
                                <div class="form-group form-group-sm">
                                    <label for="" class="col-sm-4 control-label">{% trans 'Expire' %}</label>
                                    <div class="col-sm-8">
                                        <input type="date" class="form-control" id="expire" name="expire" placeholder="{% trans 'Expire' %}" value="{{ user.expire|default:"0000-00-00" }}">
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group form-group-sm">
                                    <label for="inputEmail3" class="col-sm-4 control-label">{% trans 'Group' %}</label>
                                    <div class="col-sm-8">
                                        <div class="input-group">
                                          <input type="text" class="form-control" placeholder="{% trans 'Group' %}" aria-describedby="group" disabled value="{{ user.gid }}">
                                          <span class="input-group-addon" id="group">
                                              <a href="{% url 'core:user_group' user.id %}">
                                                  <i class="fa fa-edit fa-fw"></i>
                                              </a>
                                          </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group form-group-sm">
                                    <label for="inputPassword3" class="col-sm-4 control-label">{% trans 'Credit date' %}</label>
                                    <div class="col-sm-8">
                                        <div id="credit_date-datepicker" class="">
                                            <div class="input-group">
                                                <input data-format="yyyy-MM-dd" type="date" class="form-control" id="credit_date" aria-describedby="credit-date" name="credit_date" placeholder="{% trans 'Credit date' %}" value="{{ user.credit_date|default:"0000-00-00" }}">
                                                <span class="input-group-addon add-on" id="credit-date">
                                                    <i class="fa fa-calendar" data-time-icon="icon-time" data-date-icon="fa-calendar"></i>
                                                </span>
                                            </div>
                                        </div>
                                        <script type="text/javascript">
                                            $(function() {
                                                $('#credit_date-datepicker').datetimepicker({
                                                    pickTime: false
                                                });
                                            });
                                        </script>
                                    </div>
                                </div>
                                <div class="form-group form-group-sm">
                                    <label for="inputPassword3" class="col-sm-4 control-label">{% trans 'Disable' %}</label>
                                    <div class="col-sm-8">
                                        {% if user.disabled == True %}
                                            <input id="disable" type="checkbox" name="disable" value="1" checked onclick="changeValueCheckbox(this)">
                                        {% else %}
                                            <input id="disable" type="checkbox" name="disable" onclick="changeValueCheckbox(this)">
                                        {% endif %}
                                        <input type="text" class="form-control hidden" id="reason" name="reason">
                                        <script type="application/javascript">
                                            function changeValueCheckbox(element){
                                                if(element.checked){
                                                    element.value='1';
                                                }else{
                                                    element.value='0';
                                                }
                                                if (element.value == 1){
                                                    var reason = prompt('{% trans 'Reason' %}')
                                                    if (reason != null){
                                                        $('#reason').removeClass('hidden');
                                                        $('#reason').val(reason);
                                                    } else {
                                                        element.value = '0';
                                                        $(element).removeAttr('checked')
                                                    }
                                                } else {
                                                    $('#reason').addClass('hidden');
                                                    element.value = '0';
                                                }
                                            }
                                        </script>
                                    </div>
                                </div>
                                <div class="form-group form-group-sm">
                                    <label for="registration" class="col-sm-4 control-label">{% trans 'Registration' %}</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" id="registration" name="registration" placeholder="" disabled value="{{ bill.registration }}">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="panel-footer"><input type="submit" class="btn btn-default btn-xs center-block" value="{% trans 'Change' %}"></div>
                    </form>
                </div>
            </div>
            {% include 'dv.html' with dv=dv %}
            <div class="panel panel-primary">
                <div class="panel-heading text-center">
                    <a data-toggle="collapse" href="#user-info-panel" style="color: white">
                        <i class="fa fa-cog"></i> {% trans 'User info' %}
                    </a>
                </div>
                <div id="user-info-panel" class="panel-collapse collapse in">
                    <form class="form-horizontal" method="post" name="user_form">{% csrf_token %}
                        <div class="panel-body">
                            <div class="col-md-4">
                                <div class="form-group form-group-sm">
                                    <label for="inputEmail3" class="col-sm-4 control-label">{% trans 'FIO:' %}</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" id="firstname" name="firstname" placeholder="Firstname, Lastname" value="{{ user.pi.fio }}">
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group form-group-sm">
                                    <label for="inputEmail3" class="col-sm-4 control-label">{% trans 'Phone:' %}</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" id="phone" name="phone" placeholder="{% trans 'phone' %}" value="{{ user.pi.phone }}">
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group form-group-sm">
                                    <label for="inputEmail3" class="col-sm-4 control-label">E-mail:</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" id="e-mail" name="e-mail" placeholder="E-mail:" value="{{ user.pi.email }}">
                                    </div>
                                </div>
                            </div>
                            <hr>
                            <div class="col-md-4">
                                <div class="form-group form-group-sm">
                                    <label for="inputEmail3" class="col-sm-4 control-label">{% trans 'Districts:' %}</label>
                                    <div class="col-sm-8">
                                        <select class="form-control" id="district">
                                            {% for item in district %}
                                                <option value="{{ item.id }}">{{ item }}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group form-group-sm">
                                    <label for="inputEmail3" class="col-sm-4 control-label">{% trans 'Street:' %}</label>
                                    <div class="col-sm-8">
                                        <select class="form-control" id="location" name="location">
                                        <option value="{{ user.pi.street_id }}">{{ user.pi.street }}</option>
                                            {% for item in streets %}
                                                <option value="{{ item.id }}">{{ item }}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group form-group-sm">
                                    <label for="inputEmail3" class="col-sm-4 control-label">{% trans 'Build:' %}</label>
                                    <div class="col-sm-8">
                                        <select class="form-control" name="build">
                                            {% for item in houses %}
                                                <option value="{{ item.id }}">{{ item }}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group form-group-sm">
                                    <label for="inputEmail3" class="col-sm-4 control-label">Flat:</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" id="flat" name="flat" placeholder="Flat:" value="{{ user.pi.kv }}">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="panel-footer"><input type="submit" name="dv_submit" class="btn btn-default btn-xs center-block" value="{% trans 'Change' %}"></div>
                    </form>
                </div>
            </div>
        </div>
        <div class="col-xs-12 col-sm-12 col-md-2">
            <div class="list-group" id="right_nav">
                <a href="{% url 'core:client_payments' user.id %}" class="list-group-item">
                    {% trans 'Payments' %}
                </a>
                <a href="{% url 'core:client_fees' user.id %}" class="list-group-item">{% trans 'Fees' %}</a>
                <a href="#" class="list-group-item"><i class="fa fa-television fa-fw"></i> {% trans 'OLLTV' %}</a>
                <a href="#" class="list-group-item">Porta ac consectetur ac</a>
                <a href="#" class="list-group-item">Vestibulum at eros</a>
            </div>
        </div>
    </div>
{% endblock %}
hello