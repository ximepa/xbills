{% extends 'layout.html' %}
{% load url %}
{% load i18n %}
{% block breadcrumbs %}
    <i class="right angle icon divider"></i>
    <div class="active section">{% trans 'Tarif' %}</div>
{% endblock %}
{% block breadcrumbs_sub_header %}
    {% trans 'Tarif plans' %}
{% endblock %}
{% block content %}
    <div class="row">
        <div class="column">
        {{ tp_form.errors }}
            <div class="ui {{ request.user.theme }} mini segment">
                <div id="add_tp" class="ui accordion field">
                    <div class="title"><i class="icon dropdown"></i> {% trans 'Add new server' %} </div>
                    <div class="content field">
                        <form class="ui form" method="POST">{% csrf_token %}
                            <div class="ui tiny stacked segment">
                                <p>{% trans 'Tariff plan' %}</p>
                                {# fields 1 #}
                                <div class="four fields">
                                    <div class="field">
                                        <label>{% trans 'Name' %}</label>
                                        {{ tp_form.name }}
                                    </div>
                                    <div class="field">
                                        <label>{% trans 'Group' %}</label>
                                        {{ tp_form.gid }}
                                    </div>
                                    <div class="field">
                                        <label>{% trans 'Alert' %}</label>
                                        {{ tp_form.uplimit }}
                                    </div>
                                    <div class="field">
                                        <label>{% trans 'Simultaneously' %}</label>
                                        {{ tp_form.logins }}
                                    </div>
                                </div>
                            </div>
                            <div class="ui tiny stacked segment">
                                <p>{% trans 'Periodic payments' %}</p>
                                <div class="two fields">
                                    <div class="field">
                                        <label>{% trans 'Name' %}</label>
                                        {{ tp_form.day_fee }}
                                    </div>
                                    <div class="field">
                                        <label>{% trans 'Name' %}</label>
                                        {{ tp_form.month_fee }}
                                    </div>
                                </div>
                                <div class="Three fields">
                                    <div class="field">
                                        <div class="ui checkbox">
                                            {{ tp_form.active_day_fee }}
                                            <label>{% trans 'Active day fees' %}</label>
                                        </div>
                                    </div>
                                    <div class="field">
                                        <div class="ui checkbox">
                                            {{ tp_form.postpaid_daily_fee }}
                                            <label>{% trans 'Day fee Postpaid' %}</label>
                                        </div>
                                    </div>
                                    <div class="field">
                                        <div class="ui checkbox">
                                            {{ tp_form.postpaid_monthly_fee }}
                                            <label>{% trans 'Month fee Postpaid' %}</label>
                                        </div>
                                    </div>
                                    <div class="field">
                                        <div class="ui checkbox">
                                            {{ tp_form.period_alignment }}
                                            <label>{% trans 'Month alignment' %}</label>
                                        </div>
                                    </div>
                                    <div class="field">
                                        <div class="ui checkbox">
                                            {{ tp_form.abon_distribution }}
                                            <label>{% trans 'Abon. payments distribution' %}</label>
                                        </div>
                                    </div>
                                    <div class="field">
                                        <div class="ui checkbox">
                                            {{ tp_form.fixed_fees_day }}
                                            <label>{% trans 'Fixed fees day' %}</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="ui tiny stacked segment">
                                <p>{% trans 'Time limit (sec)' %}</p>
                                <div class="five fields">
                                    <div class="field">
                                        <label>{% trans 'Name' %}</label>
                                        {{ tp_form.day_time_limit }}
                                    </div>
                                    <div class="field">
                                        <label>{% trans 'Group' %}</label>
                                        {{ tp_form.week_time_limit }}
                                    </div>
                                    <div class="field">
                                        <label>{% trans 'Alert' %}</label>
                                        {{ tp_form.month_time_limit }}
                                    </div>
                                    <div class="field">
                                        <label>{% trans 'Simultaneously' %}</label>
                                        {{ tp_form.total_time_limit }}
                                    </div>
                                    <div class="field">
                                        <label>{% trans 'Simultaneously' %}</label>
                                        {{ tp_form.small_deposit_action }}
                                    </div>
                                </div>
                            </div>
                            <div class="ui tiny stacked segment">
                                <p>{% trans 'Traffic limit (Mb)' %}</p>
                                <div class="five fields">
                                    <div class="field">
                                        <label>{% trans 'Name' %}</label>
                                        {{ tp_form.day_traf_limit }}
                                    </div>
                                    <div class="field">
                                        <label>{% trans 'Group' %}</label>
                                        {{ tp_form.week_traf_limit }}
                                    </div>
                                    <div class="field">
                                        <label>{% trans 'Alert' %}</label>
                                        {{ tp_form.month_traf_limit }}
                                    </div>
                                    <div class="field">
                                        <label>{% trans 'Simultaneously' %}</label>
                                        {{ tp_form.total_traf_limit }}
                                    </div>
                                    <div class="field">
                                        <label>{% trans 'Simultaneously' %}</label>
                                        {{ tp_form.octets_direction }}
                                    </div>
                                </div>
                            </div>
                            <div class="ui tiny stacked segment">
                                <p>{% trans 'Other' %}</p>
                                <div class="six fields">
                                    <div class="field">
                                        <label>{% trans 'Name' %}</label>
                                        {{ tp_form.activate_price }}
                                    </div>
                                    <div class="field">
                                        <label>{% trans 'Group' %}</label>
                                        {{ tp_form.change_price }}
                                    </div>
                                    <div class="field">
                                        <label>{% trans 'Alert' %}</label>
                                        {{ tp_form.credit_tresshold }}
                                    </div>
                                    <div class="field">
                                        <label>{% trans 'Simultaneously' %}</label>
                                        {{ tp_form.credit }}
                                    </div>
                                    <div class="field">
                                        <label>{% trans 'Simultaneously' %}</label>
                                        {{ tp_form.max_session_duration }}
                                    </div>
                                    <div class="field">
                                        <label>{% trans 'Simultaneously' %}</label>
                                        {{ tp_form.filter_id }}
                                    </div>
                                </div>
                                <div class="six fields">
                                    <div class="field">
                                        <label>{% trans 'Simultaneously' %}</label>
                                        {{ tp_form.age }}
                                    </div>
                                    <div class="field">
                                        <label>{% trans 'Name' %}</label>
                                        {{ tp_form.payment_type }}
                                    </div>
                                    <div class="field">
                                        <label>{% trans 'Group' %}</label>
                                        {{ tp_form.min_session_cost }}
                                    </div>
                                    <div class="field">
                                        <label>{% trans 'Alert' %}</label>
                                        {{ tp_form.min_use }}
                                    </div>
                                    <div class="field">
                                        <label>{% trans 'Simultaneously' %}</label>
                                        {{ tp_form.traffic_transfer_period }}
                                    </div>
                                    <div class="field">
                                        <label>{% trans 'Simultaneously' %}</label>
                                        {{ tp_form.neg_deposit_filter_id }}
                                    </div>
                                </div>
                                <div class="five fields">
                                    <div class="field">
                                        <label>{% trans 'Simultaneously' %}</label>
                                        {{ tp_form.neg_deposit_ippool }}
                                    </div>
                                    <div class="field">
                                        <label>{% trans 'Simultaneously' %}</label>
                                        {{ tp_form.ippool }}
                                    </div>
                                    <div class="field">
                                        <label>{% trans 'Simultaneously' %}</label>
                                        {{ tp_form.priority }}
                                    </div>
                                    <div class="field">
                                        <label>{% trans 'Simultaneously' %}</label>
                                        {{ tp_form.fine }}
                                    </div>
                                    <div class="field">
                                        <label>{% trans 'Simultaneously' %}</label>
                                        {{ tp_form.next_tp_id }}
                                    </div>
                                </div>
                            </div>
                            {% if edit %}
                                <button class="tiny ui teal submit button" name="edit_server" value="change" type="submit">{% trans 'Change' %}</button>
                            {% else %}
                                <button class="tiny ui teal submit button" name="add_server" value="change" type="submit">{% trans 'Add' %}</button>
                            {% endif %}
                        </form>
                    </div>
                </div>
            </div>
            <div class="ui {{ request.user.theme }} segment">
                {% if tp %}
                    <script>$('#add_tp').accordion('close', 0);</script>
                    <div class="ui sticky mini fluid pagination menu">
                        <div class="header item">{% trans 'Export' %}</div>
                        <a href="?{% url_replace request 'xml' '1' %}" target="_blank" class="item popup" data-content="{% trans 'Will be opened in new window' %}">
                            <i class="gamepad icon"></i>
                            Xml
                        </a>
                        <a href="?{% url_replace request 'csv' '1' %}" class="item">
                            <i class="video camera icon"></i>
                            Csv
                        </a>
                        <div class="header right floated item">{% trans 'Pagination' %}</div>
                        {% if fees.number == 1 %}
                            <div class="disabled item">
                                1
                            </div>
                        {% endif %}
                        {% if fees.has_previous %}
                            <a href="?{% url_replace_page request 'page' '1' %}" class="item">1</a>
                            {% if fees.number > 7 %}
                                <div class="disabled item">
                                    ...
                                </div>
                            {% endif %}
                        {% endif %}
                        {% for p in page_list %}
                            {% if p == 1 %}
                            {% else %}
                                {% if fees.number == p %}
                                    <a class="item active" href="?{% url_replace_page request 'page' p %}">{{ p }}</a>
                                {% else %}
                                    <a class="item" href="?{% url_replace_page request 'page' p %}">{{ p }}</a>
                                {% endif %}
                            {% endif %}
                        {% endfor %}
                        {% if fees.has_next %}
                            {% if fees.number < fees.paginator.num_pages|add:"-5" %}
                                <div class="disabled item">
                                    ...
                                </div>
                                <a class="item" href="?{% url_replace_page request 'page' fees.paginator.num_pages %}" aria-label="Next">
                                    {{ fees.paginator.num_pages }}
                                </a>
                            {% endif %}
                        {% endif %}
                    </div>
                    <table class="ui blue small very compact selectable striped table">
                        <thead>
                            <tr>
                                <th><a href="?{% url_replace request 'order_by' 'id' %}">{% trans 'Number' %}</a></th>
                                <th><a href="?{% url_replace request 'order_by' 'name' %}">{% trans 'Name' %}</a></th>
                                <th><a href="?{% url_replace request 'order_by' 'dsc' %}">{% trans 'Time tariff' %}</a></th>
                                <th><a href="?{% url_replace request 'order_by' 'sum' %}">{% trans 'Traffic tarifs' %}</a></th>
                                <th><a href="?{% url_replace request 'order_by' 'last_deposit' %}">{% trans 'Payment type' %}</a></th>
                                <th><a href="?{% url_replace request 'order_by' 'method' %}">{% trans 'Day fee' %}</a></th>
{#                                <th><a href="?{% url_replace request 'order_by' 'aid' %}">{% trans 'Month fee' %}</a></th>#}
{#                                <th><a href="?{% url_replace request 'order_by' 'aid' %}">{% trans 'Simultaneously' %}</a></th>#}
{#                                <th><a href="?{% url_replace request 'order_by' 'aid' %}">{% trans 'Age' %}</a></th>#}
{#                                <th><a href="?{% url_replace request 'order_by' 'aid' %}">{% trans 'Group' %}</a></th>#}
                                <th>-</th>
                                <th>-</th>
                                <th>-</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for t in tp %}
                            <tr>
                                <td>{{ t.id }}</td>
                                <td>{{ t.name }}</td>
                                <td>{{ t.id }}</td>
                                <td>{{ t.id }}</td>
                                <td>{{ t.id }}</td>
                                <td>{{ t.id }}</td>
                                <td>{{ t.id }}</td>
{#                                <td>{{ t.id }}</td>#}
{#                                <td>{{ t.id }}</td>#}
{#                                <td>{{ t.id }}</td>#}
                                <td>{{ t.id }}</td>
                                <td>{{ t.id }}</td>
                                <td>{{ t.id }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                        <tfoot>
                            <tr>
                                <th></th>
                                <th></th>
                                <th></th>
                                <th></th>
                                <th><div class="ui blue tiny label">{% trans 'Sum' %}<div class="detail">{{ out_sum }}</div></div></th>
                                <th></th>
                                <th></th>
                                <th></th>
                                <th><div class="ui blue tiny label">{% trans 'All' %} <div class="detail">{{ tp.count }}</div></div></th>
                                <th></th>
                            </tr>
                        </tfoot>
                    </table>
                {% else %}
                    <script>$('#add_tp').accordion('open', 0);</script>
                    {% trans 'Tariff plans not found' %}
                {% endif %}
            </div>
        </div>
    </div>
{% endblock %}